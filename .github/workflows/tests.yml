---
  name: Lint, type check and test

  on: [push, pull_request]

  jobs:
    lint-and-type-check:
      runs-on: ubuntu-latest
      strategy:
        matrix:
          python-version: ["3.9", "3.10", "3.11", "3.12", "3.13"]
      steps:
        - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6
          with:
            fetch-depth: 0
        - name: Install the latest version of uv and set the python version
          uses: astral-sh/setup-uv@b75a909f75acd358c2196fb9a5f1299a9a8868a4 # v6
          with:
            python-version: ${{ matrix.python-version }}
        - name: Run linting and type checking
          run: |
            uv run --frozen pre-commit run --all-files

    test:
      runs-on: ubuntu-latest
      strategy:
        matrix:
          python-version: ["3.9", "3.10", "3.11", "3.12", "3.13"]
      steps:
        - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6
          with:
            fetch-depth: 0
        - name: Install the latest version of uv and set the python version
          uses: astral-sh/setup-uv@b75a909f75acd358c2196fb9a5f1299a9a8868a4 # v6
          with:
            python-version: ${{ matrix.python-version }}
        - name: Test with python ${{ matrix.python-version }}
          run: uv run --frozen pytest
