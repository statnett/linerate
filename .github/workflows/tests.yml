---
  name: Lint and Test

  on: [push, pull_request]

  jobs:
    lint:
      runs-on: ubuntu-latest
      strategy:
        matrix:
          python-version: ["3.9", "3.10", "3.11", "3.12", "3.13"]
      steps:
        - uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5
          with:
            fetch-depth: 0
        - name: Install the latest version of uv and set the python version
          uses: astral-sh/setup-uv@b75a909f75acd358c2196fb9a5f1299a9a8868a4 # v6
          with:
            python-version: ${{ matrix.python-version }}
        - name: Run linting
          run: |
            uv run --frozen pre-commit run --all-files

    test:
      runs-on: ubuntu-latest
      strategy:
        matrix:
          python-version: ["3.9", "3.10", "3.11", "3.12", "3.13"]
      steps:
        - uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5
          with:
            fetch-depth: 0
        - name: Install the latest version of uv and set the python version
          uses: astral-sh/setup-uv@b75a909f75acd358c2196fb9a5f1299a9a8868a4 # v6
          with:
            python-version: ${{ matrix.python-version }}
        - name: Test with python ${{ matrix.python-version }}
          run: uv run --frozen pytest
